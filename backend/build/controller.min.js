"use strict";(function(){var l,s,r;s=require("../../crawl/build/crawl.min.js"),r=require("child_process").spawn,l=require("async"),exports.retrieve=function(e,n){var t;e.params.name?(t={name:"".concat(e.params.name),description:{label:"description",stopword:!0},properties:[{name:"P19",label:"placeofbirth"},{name:"P21",label:"sex"},{name:"P20",label:"placeofdeath"},{name:"P106",label:"occupation",stopword:!0},{name:"P108",label:"employer",stopword:!0,unique:!0},{name:"P463",label:"memberof",stopword:!0,unique:!0}],limit:1e3,lang:"en",flatten:!0,unique:!0},s.retrieve(t,function(e){n.json(e.body.results)})):n.send("Wrong input.")},exports.ner=function(e,n){var t;(t=e.query.text)&&"[object String]"===Object.prototype.toString.call(t)?r("python3",["/home/uno/repos/TextMining/ner/detect-persons.py",t]).stdout.on("data",function(e){e=JSON.parse(e),n.send(e)}):n.send("Wrong input.")},exports.parse=function(e,a){var i;if((i=e.query.text)&&"[object String]"===Object.prototype.toString.call(i))return r("python3",["/home/uno/repos/TextMining/ner/detect-persons.py",i]).stdout.on("data",function(e){var n,t,r,o;for(o=[],n=0,t=(e=JSON.parse(e)).length;n<t;n++)r=e[n],o.push({name:"".concat(r),description:{label:"description",stopword:!0},properties:[{name:"P19",label:"placeofbirth"},{name:"P21",label:"sex"},{name:"P20",label:"placeofdeath"},{name:"P106",label:"occupation",stopword:!0},{name:"P108",label:"employer",stopword:!0,unique:!0},{name:"P463",label:"memberof",stopword:!0,unique:!0}],limit:1e3,lang:"en",flatten:!0,unique:!0});return l.mapSeries(o,function(n,t){return s.retrieve(n,function(e){return t(null,{original:n.name,results:e.body.results})})},function(e,n){a.json({text:i,names:n})})});a.send("Wrong input.")}}).call(void 0);
//# sourceMappingURL=backend.js.map