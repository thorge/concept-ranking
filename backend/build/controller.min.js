"use strict";(function(){var i,l,r;l=require("../../crawl/build/crawl.min.js"),r=require("child_process").spawn,i=require("async"),exports.retrieve=function(e,t){var n;e.params.name?(n={name:"".concat(e.params.name),description:{label:"description",stopword:!0},properties:[{name:"P19",label:"placeofbirth"},{name:"P21",label:"sex"},{name:"P20",label:"placeofdeath"},{name:"P106",label:"occupation",stopword:!0},{name:"P108",label:"employer",stopword:!0,unique:!0},{name:"P463",label:"memberof",stopword:!0,unique:!0}],limit:1e3,lang:"en",flatten:!0,unique:!0},l.retrieve(n,function(e){t.json(e.body.results)})):t.status(500).send([])},exports.ner=function(e,t){var n;(n=e.query.text)&&"[object String]"===Object.prototype.toString.call(n)?r("python3",["/home/uno/repos/TextMining/ner/detect-persons.py",n]).stdout.on("data",function(e){e=JSON.parse(e),t.send(e)}):t.status(500).send([])},exports.parse=function(e,a){var s;if((s=e.query.text)&&"[object String]"===Object.prototype.toString.call(s))return r("python3",["/home/uno/repos/TextMining/ner/detect-persons.py",s]).stdout.on("data",function(e){var t,n,r,o;for(o=[],t=0,n=(e=JSON.parse(e)).length;t<n;t++)r=e[t],o.push({name:"".concat(r),description:{label:"description",stopword:!0},properties:[{name:"P19",label:"placeofbirth"},{name:"P21",label:"sex"},{name:"P20",label:"placeofdeath"},{name:"P106",label:"occupation",stopword:!0},{name:"P108",label:"employer",stopword:!0,unique:!0},{name:"P463",label:"memberof",stopword:!0,unique:!0}],limit:1e3,lang:"en",flatten:!0,unique:!0});return i.mapSeries(o,function(t,n){return l.retrieve(t,function(e){return n(null,{original:t.name,results:e.body.results,query:e.query})})},function(e,t){a.json({text:s,names:t})})});a.status(500).send([])}}).call(void 0);
//# sourceMappingURL=backend.js.map